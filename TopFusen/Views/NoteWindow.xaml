<Window x:Class="TopFusen.Views.NoteWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        WindowStyle="None"
        AllowsTransparency="True"
        Topmost="True"
        ShowInTaskbar="False"
        MinWidth="160"
        MinHeight="120"
        Width="240"
        Height="180"
        Background="Transparent">

    <!-- P3-1: WindowChrome â€” ãƒªã‚µã‚¤ã‚ºãƒãƒ³ãƒ‰ãƒ«æœ‰åŠ¹åŒ– + CaptionHeight=0ï¼ˆã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ©ãƒƒã‚°ï¼‰ -->
    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="0"
                      ResizeBorderThickness="6"
                      GlassFrameThickness="0"
                      CornerRadius="0"/>
    </WindowChrome.WindowChrome>

    <!-- ä»˜ç®‹ã®æœ¬ä½“ï¼ˆBorderThickness ã¯å¸¸ã« 2ã€é¸æŠžæ™‚ã®ã¿è‰²ãŒä»˜ãï¼‰ -->
    <Border x:Name="NoteBorder"
            Background="#FFFBE38C"
            CornerRadius="4"
            BorderThickness="2"
            BorderBrush="Transparent">

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>  <!-- ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ï¼ˆãƒ‰ãƒ©ãƒƒã‚°é ˜åŸŸï¼‰ -->
                <RowDefinition Height="*"/>     <!-- æœ¬æ–‡ -->
                <RowDefinition Height="Auto"/>  <!-- ä¸‹éƒ¨ã‚¢ã‚¤ã‚³ãƒ³åˆ— -->
            </Grid.RowDefinitions>

            <!-- === P3-2: ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ï¼ˆç·¨é›†ON + é¸æŠžä¸­ã®ã¿è¡¨ç¤º / ãƒ‰ãƒ©ãƒƒã‚°ãƒãƒ³ãƒ‰ãƒ«ï¼‰ === -->
            <Border x:Name="ToolbarArea"
                    Grid.Row="0"
                    Background="#18000000"
                    Padding="6,3"
                    CornerRadius="2,2,0,0"
                    Cursor="SizeAll"
                    Visibility="Collapsed"
                    MouseLeftButtonDown="ToolbarArea_MouseLeftButtonDown">
                <Grid>
                    <!-- ãƒ‰ãƒ©ãƒƒã‚°ãƒãƒ³ãƒ‰ãƒ«ï¼ˆå·¦å¯„ã›ï¼‰ -->
                    <TextBlock Text="â ¿"
                               FontSize="14"
                               Foreground="#66333333"
                               HorizontalAlignment="Left"
                               VerticalAlignment="Center"
                               IsHitTestVisible="False"/>
                    <!-- Phase 4: ã“ã“ã«ãƒªãƒƒãƒãƒ†ã‚­ã‚¹ãƒˆè£…é£¾ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ã‚’è¿½åŠ äºˆå®š -->
                </Grid>
            </Border>

            <!-- === æœ¬æ–‡é ˜åŸŸ === -->
            <!-- Phase 4 ã§ RichTextBox ã«ç½®ãæ›ãˆäºˆå®š -->
            <TextBlock x:Name="NoteText"
                       Grid.Row="1"
                       Text=""
                       FontSize="14"
                       FontFamily="Yu Gothic UI"
                       Foreground="#FF333333"
                       TextWrapping="Wrap"
                       VerticalAlignment="Top"
                       Padding="8,6"
                       IsHitTestVisible="False"/>

            <!-- === P3-5/P3-6: ä¸‹éƒ¨ã‚¢ã‚¤ã‚³ãƒ³åˆ—ï¼ˆç·¨é›†ON + é¸æŠžä¸­ã®ã¿è¡¨ç¤ºï¼‰ === -->
            <Border x:Name="BottomBar"
                    Grid.Row="2"
                    Visibility="Collapsed">
                <StackPanel Orientation="Horizontal"
                            HorizontalAlignment="Right"
                            Margin="0,0,4,4">
                    <!-- è¤‡è£½ãƒœã‚¿ãƒ³ -->
                    <Button x:Name="DuplicateButton"
                            ToolTip="è¤‡è£½"
                            Width="26" Height="26"
                            Margin="2,0"
                            Cursor="Hand"
                            Click="DuplicateButton_Click"
                            Background="Transparent"
                            BorderBrush="#44333333"
                            BorderThickness="1">
                        <TextBlock Text="ðŸ“‹" FontSize="13" />
                    </Button>
                    <!-- å‰Šé™¤ãƒœã‚¿ãƒ³ -->
                    <Button x:Name="DeleteButton"
                            ToolTip="å‰Šé™¤"
                            Width="26" Height="26"
                            Margin="2,0"
                            Cursor="Hand"
                            Click="DeleteButton_Click"
                            Background="Transparent"
                            BorderBrush="#44333333"
                            BorderThickness="1">
                        <TextBlock Text="ðŸ—‘" FontSize="13" />
                    </Button>
                </StackPanel>
            </Border>

        </Grid>
    </Border>
</Window>
